<main>
    <p>Это пример простой HTML-страницы.</p>

    <!-- Форма для ввода ИНН -->
    <form id="innForm">
        <label for="inn">ИНН клиента:</label><br>
        <input type="text" id="inn" name="inn" maxlength="10" placeholder="Введите ИНН"><br><br> <!-- Изменено: maxlength="10" -->
        <button type="submit">Проверить</button>
    </form>

    <!-- Поле вывода кратких данных -->
    <div id="shortResult" style="margin-top: 20px; border: 1px solid #ccc; padding: 10px; background-color: #eef; font-family: monospace;">
        Здесь будут краткие данные:
    </div>

    <!-- Подключение JavaScript -->
    <script>
        document.getElementById('innForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const inn = document.getElementById('inn').value;

            if (!inn || inn.length !== 10) {
                document.getElementById('result').innerText = 'ИНН должен содержать 10 символов';
                document.getElementById('shortResult').innerText = '';
                return;
            }

            fetch(`/check_inn?inn=${inn}`)
                .then(response => response.json())
                .then(json => {
                    if (json.error) {
                        document.getElementById('shortResult').innerText = '';
                    } else {
                        let shortText = '';
                        for (const key in json.short) {
                            shortText += `${key}: ${json.short[key]}\n`;
                        }
                        document.getElementById('shortResult').innerText = shortText.trim();
                    }
                })
                .catch(error => {
                    document.getElementById('shortResult').innerText = '';
                });
        });
    </script>

    <!-- Добавьте это в конец index.html -->
    <form method="POST" action="/logout">
        <button type="submit">Выйти</button>
    </form>

    <script>
    document.querySelector("form[action='/logout']").addEventListener('submit', function(e) {
        e.preventDefault();
        fetch('/logout', { method: 'POST' })
            .then(() => window.location.href = '/login');
    });
    </script>
</main>
